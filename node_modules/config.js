 var 	fs = require('fs'),
 		EventEmitter = require('events').EventEmitter;

Config.prototype = new EventEmitter;
function Config(){

	var _this = this;

	function write(c){
		var data = JSON.stringify(c);
		fs.writeFile('./config.json', data, function(err){
			if(err){
				_this.emit('err', err.message);
				return;
			}
		});
	}

	function read(){
		var obj;

		try {
			data = fs.readFileSync('./config.json');
			obj = JSON.parse(data);
		}
		catch (err) {
			_this.emit('err', err);
		}

		return obj;
	}

	this.write = write;
	this.read = read;
}

module.exports = new Config();